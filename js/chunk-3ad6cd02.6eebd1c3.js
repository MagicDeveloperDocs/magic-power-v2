(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ad6cd02"],{"5fed":function(t,e,n){"use strict";n("6e79")},"6e79":function(t,e,n){},"7cf4":function(t,e,n){},b7a1:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("notify",{ref:"notify"}),n("div",{staticClass:"banner"},[n("h2",[t._v(t._s(t.$t("魔力充值")))])]),n("div",{staticClass:"deposit"},[n("div",{staticClass:"deposit-cont"},[n("div",{staticClass:"deposit-group"},[n("em",{staticClass:"deposit-ico ico-coin-mp"}),n("span",{staticClass:"deposit-name"},[t._v("MP")]),n("input",{attrs:{type:"text",placeholder:t.$t("请输入")},domProps:{value:t.mpValue},on:{input:t.mpInput}}),n("a",{staticClass:"btn btn-empty",on:{click:t.maxValue}},[t._v(t._s(t.$t("最大值")))])]),n("i",{staticClass:"ico ico-angle-random deposit-exchange"}),n("div",{staticClass:"deposit-group"},[n("em",{staticClass:"ico-coin-mp"}),n("span",[t._v("X-MP")]),n("input",{attrs:{type:"text",readonly:"readonly"},domProps:{value:t.mpValue}})])])]),t.approveBtn.disable?t._e():n("a",{staticClass:"btn confirm",on:{click:t.approve}},[t._v(t._s(t.$t("确认授权"))+" "),n("shadow")]),t.approveBtn.disable?n("a",{staticClass:"btn confirm",on:{click:t.exchange}},[t._v(t._s(t.$t("充值"))+" "),n("shadow")]):t._e()],1)},s=[],o=n("1da1"),i=n("ade3"),r=(n("96cf"),n("ee7a")),c={name:"index",components:{Notify:r["a"]},data:function(){return{mpValue:"",mpBalance:"0",approveBtn:{disable:!1}}},watch:Object(i["a"])({},"$store.state.walletAddress",(function(){this.init()})),computed:{},methods:{mpInput:function(t){this.mpValue=t.target.value},approve:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading.show(),e.prev=1,n=t.$api.getConnect(),e.next=5,t.$api.getConnect().erc20().approve(n.addressInfo.staking,n.addressInfo.mp);case 5:return a=e.sent,t.$refs.notify.show(a.getHash()),e.next=9,a.confirm();case 9:return t.$toast(t.$t("授权成功")),e.next=12,t.init();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),t.$toast(e.t0.message);case 17:return e.prev=17,t.$loading.hide(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))()},exchange:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading.show(),e.prev=1,e.next=4,t.$api.getConnect().tradeApi().stake(t.mpValue);case 4:return n=e.sent,t.$refs.notify.show(n.getHash()),e.next=8,n.confirm();case 8:return t.$toast(t.$t("充值成功")),e.next=11,t.init();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),t.$toast(e.t0.message);case 16:return e.prev=16,t.$loading.hide(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})))()},maxValue:function(){this.mpValue=this.mpBalance},rest:function(){Object.assign(this.$data,{mpValue:"",mpBalance:"0",approveBtn:{disable:!1}})},init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.rest(),!t.$store.state.walletConnect){e.next=7;break}return e.next=4,t.$api.getConnect().erc20().getBalanceAndApprove(t.$api.getConnect().addressInfo.staking,t.$api.getConnect().addressInfo.mp,t.$store.state.walletAddress);case 4:n=e.sent,t.approveBtn.disable=!n.showApprove,t.mpBalance=n.amount;case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:case"end":return e.stop()}}),e)})))()}},u=c,l=n("2877"),p=Object(l["a"])(u,a,s,!1,null,"50830720",null);e["default"]=p.exports},ee7a:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-notify",{staticStyle:{opacity:"0.8"},attrs:{type:"success",background:"#2464f6"},model:{value:t.notify.show,callback:function(e){t.$set(t.notify,"show",e)},expression:"notify.show"}},[n("div",{staticClass:"flex align-center justify-between notify"},[n("a",{staticClass:"link flex align-center justify-between",attrs:{href:t.etherscan,target:"_blank"}},[n("div",{staticClass:"flex align-center left bbo"},[n("van-icon",{staticClass:"right",attrs:{name:"passed"}}),n("span",{staticClass:"ellipsis"},[t._v(" "+t._s(t.notify.tx))])],1),n("van-icon",{staticClass:"right",attrs:{name:"arrow"}})],1)])])],1)},s=[],o=(n("3cd0"),n("1a44"),n("acc2"),n("ad06")),i=(n("1812"),n("5e5e"),n("7cf4"),n("c31d")),r=n("2b0e"),c=n("2638"),u=n.n(c),l=n("d282"),p=n("ba31"),d=n("6605"),f=n("e41f"),m=Object(l["a"])("notify"),v=m[0],h=m[1];function g(t,e,n,a){var s={color:e.color,background:e.background};return t(f["a"],u()([{attrs:{value:e.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:s,class:[h([e.type]),e.className]},Object(p["a"])(a,!0)]),[(null==n.default?void 0:n.default())||e.message])}g.props=Object(i["a"])({},d["b"],{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var b,w,y=v(g),x=n("a142");function C(t){return Object(x["e"])(t)?t:{message:t}}function $(t){if(!x["f"])return w||(w=Object(p["b"])(y,{on:{click:function(t){w.onClick&&w.onClick(t)},close:function(){w.onClose&&w.onClose()},opened:function(){w.onOpened&&w.onOpened()}}})),t=Object(i["a"])({},$.currentOptions,C(t)),Object(i["a"])(w,t),clearTimeout(b),t.duration&&t.duration>0&&(b=setTimeout($.clear,t.duration)),w}function k(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}$.clear=function(){w&&(w.value=!1)},$.currentOptions=k(),$.setDefaultOptions=function(t){Object(i["a"])($.currentOptions,t)},$.resetDefaultOptions=function(){$.currentOptions=k()},$.install=function(){r["a"].use(y)},$.Component=y,r["a"].prototype.$notify=$;var O=$,_=n("365c"),j={name:"notify",components:{"van-notify":O.Component,"van-icon":o["a"]},computed:{etherscan:function(){return _["a"].goEtherscanTx(this.notify.tx)}},data:function(){return{notify:{show:!1,tx:""}}},methods:{show:function(t){var e=this;this.notify.tx=t,this.notify.show=!0,setTimeout((function(){e.notify.show=!1}),5e3)}}},B=j,V=(n("5fed"),n("2877")),R=Object(V["a"])(B,a,s,!1,null,"7ca36873",null);e["a"]=R.exports}}]);